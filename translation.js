// Define translations object
const translations = {
    es: {
        page_title: "MereyDev - Soluciones de Software",
        meta_description: "MereyDev ofrece soluciones de desarrollo de software a medida, consultoría IT y servicios de outsourcing. Transformamos tus ideas en realidad digital.",
        meta_keywords: "desarrollo de software, consultoría IT, outsourcing de software, aplicaciones web, aplicaciones móviles, ciberseguridad, migración cloud, mantenimiento de software, desarrollo a medida, Venezuela, América Latina",
        og_title: "MereyDev - Soluciones de Software Personalizadas",
        og_description: "Transformamos tus ideas en soluciones digitales efectivas: desarrollo web, móvil, consultoría y outsourcing.",
        twitter_title: "MereyDev - Expertos en Desarrollo de Software",
        twitter_description: "Tu socio tecnológico para desarrollo web y móvil, consultoría IT y outsourcing. ¡Lleva tu proyecto al siguiente nivel!",
        nav_home: "Inicio",
        nav_about: "Nosotros",
        nav_services: "Servicios",
        nav_team: "Equipo",
        nav_portfolio: "Portafolio",
        nav_contact: "Contacto",
        hero_title: "Innovación y Soluciones Tecnológicas",
        hero_description: "Transformamos tus ideas en soluciones digitales efectivas. Desde el desarrollo de software a medida hasta la consultoría IT, estamos aquí para llevar tu proyecto al siguiente nivel.",
        hero_button: "Empieza Tu Proyecto Hoy",
        about_title: "Quiénes Somos",
        about_description: "MereyDev nace de la experiencia, evolucionando para enfocarse en el desarrollo integral de software. Somos un equipo apasionado por la tecnología, dedicado a entregar software de alta calidad y escalable, a través de consultoría IT y soluciones gestionadas de outsourcing.",
        about_card1_title: "Innovación",
        about_card1_description: "Exploramos constantemente nuevas tecnologías para ofrecer soluciones a la vanguardia.",
        about_card2_title: "Seguridad",
        about_card2_description: "Implementamos las mejores prácticas de seguridad en cada etapa del desarrollo.",
        about_card3_title: "Colaboración",
        about_card3_description: "Trabajamos codo a codo con nuestros clientes para superar sus expectativas.",
        services_title: "Nuestros Servicios",
        services_description: "Ofrecemos soluciones de desarrollo de software flexibles, adaptadas a tus necesidades, desde el soporte continuo hasta la creación de proyectos a medida.",
        service1_title: "Desarrollo Web (Desde Cero)",
        service1_description: "Creamos sitios y aplicaciones web personalizadas, robustas y seguras, desde la fase de ideación hasta el lanzamiento.",
        service2_title: "Aplicaciones Móviles (Desde Cero)",
        service2_description: "Diseñamos y desarrollamos aplicaciones nativas e híbridas innovadoras para iOS y Android.",
        service3_title: "Outsourcing & Staff Augmentation",
        service3_description: "Proporcionamos equipos de desarrollo expertos para complementar tu personal o gestionar proyectos completos.",
        service4_title: "Migración y Optimización Cloud",
        service4_description: "Gestionamos la migración de tus sistemas a la nube y optimizamos tu infraestructura existente para eficiencia.",
        service5_title: "Auditorías y Consultoría de Seguridad",
        service5_description: "Evaluamos y fortalecemos la postura de seguridad de tu software y sistemas.",
        service6_title: "Mantenimiento y Soporte Continuo",
        service6_description: "Aseguramos el funcionamiento óptimo de tus aplicaciones con soporte y mantenimiento proactivo.",
        team_title: "Conoce a Nuestro Equipo",
        team_description: "Somos un grupo diverso de expertos apasionados por el desarrollo de software y la seguridad. Juntos, convertimos tus ideas en realidad.",
        team_member1_name: "Christian Marquez",
        team_member1_role: "Software Developer & Cybersecurity Analyst",
        team_member2_name: "Alejandro Abreu",
        team_member2_role: "Front-End Developer & UI/UX Designer",
        team_member3_name: "Aurelio ML",
        team_member3_role: "Software Engineer & Artificial Intelligence",
        team_member4_name: "Anthony Peña",
        team_member4_role: "IT Helpdesk & DevOps",
        team_member5_name: "Barbara Chacin",
        team_member5_role: "3D Designer & .NET Developer",
        portfolio_title: "Nuestro Portafolio",
        portfolio_description: "Descubre algunos de nuestros proyectos más destacados, que abarcan desde soluciones gestionadas hasta desarrollos innovadores desde cero.",
        portfolio1_title: "Plataforma de E-commerce B2B",
        portfolio1_subtitle: "Solución Gestionada",
        portfolio1_description: "Optimización y mantenimiento continuo de una plataforma de comercio electrónico de alto tráfico para una empresa global.",
        portfolio2_title: "App Móvil de Salud Personalizada",
        portfolio2_subtitle: "Proyecto desde Cero",
        portfolio2_description: "Desarrollo de una aplicación móvil innovadora para el seguimiento de la salud y el bienestar, con IA integrada.",
        portfolio3_title: "Sistema de Gestión de Clientes (CRM)",
        portfolio3_subtitle: "Solución Gestionada",
        portfolio3_description: "Modernización y soporte de un CRM legado, mejorando su rendimiento y añadiendo nuevas funcionalidades.",
        portfolio4_title: "Plataforma Educativa Gamificada",
        portfolio4_subtitle: "Proyecto desde Cero",
        portfolio4_description: "Creación de una plataforma de aprendizaje interactiva con elementos de gamificación para estudiantes universitarios.",
        portfolio5_title: "Integración de Microservicios para Fintech",
        portfolio5_subtitle: "Solución Gestionada",
        portfolio5_description: "Desarrollo e integración de nuevos microservicios para una aplicación financiera existente.",
        portfolio6_title: "Herramienta de Análisis de Datos IoT",
        portfolio6_subtitle: "Proyecto desde Cero",
        portfolio6_description: "Creación de un dashboard interactivo para visualizar y analizar datos de sensores IoT en tiempo real.",
        contact_title: "Contáctanos",
        contact_description: "¿Listo para llevar tu proyecto al siguiente nivel con MereyDev? Ya sea una solución gestionada o un proyecto innovador desde cero, ¡Ponte en contacto con nosotros!",
        contact_form_success: "¡Gracias por tu mensaje! Nos pondremos en contacto contigo pronto.",
        contact_form_close: "Cerrar",
        footer_text: "&copy; <span id='currentYear'></span> MereyDev. Todos los derechos reservados."
    },
    en: {
        page_title: "MereyDev - Software Solutions",
        meta_description: "MereyDev offers custom software development, IT consulting, and outsourcing services. We transform your ideas into digital reality.",
        meta_keywords: "software development, IT consulting, software outsourcing, web applications, mobile applications, cybersecurity, cloud migration, software maintenance, custom development, Venezuela, Latin America",
        og_title: "MereyDev - Custom Software Solutions",
        og_description: "We transform your ideas into effective digital solutions: web, mobile, consulting, and outsourcing.",
        twitter_title: "MereyDev - Software Development Experts",
        twitter_description: "Your technology partner for web and mobile development, IT consulting, and outsourcing. Take your project to the next level!",
        nav_home: "Home",
        nav_about: "About Us",
        nav_services: "Services",
        nav_team: "Team",
        nav_portfolio: "Portfolio",
        nav_contact: "Contact",
        hero_title: "Innovation and Technology Solutions",
        hero_description: "We transform your ideas into effective digital solutions. From custom software development to IT consulting, we are here to take your project to the next level.",
        hero_button: "Start Your Project Today",
        about_title: "Who We Are",
        about_description: "MereyDev was born from experience, evolving to focus on comprehensive software development. We are a team passionate about technology, dedicated to delivering high-quality and scalable software through IT consulting and managed outsourcing solutions.",
        about_card1_title: "Innovation",
        about_card1_description: "We constantly explore new technologies to offer cutting-edge solutions.",
        about_card2_title: "Security",
        about_card2_description: "We implement the best security practices at every stage of development.",
        about_card3_title: "Collaboration",
        about_card3_description: "We work hand-in-hand with our clients to exceed their expectations.",
        services_title: "Our Services",
        services_description: "We offer flexible software development solutions, tailored to your needs, from continuous support to the creation of custom projects.",
        service1_title: "Web Development (From Scratch)",
        service1_description: "We create personalized, robust, and secure websites and web applications, from the ideation phase to launch.",
        service2_title: "Mobile Applications (From Scratch)",
        service2_description: "We design and develop innovative native and hybrid applications for iOS and Android.",
        service3_title: "Outsourcing & Staff Augmentation",
        service3_description: "We provide expert development teams to complement your staff or manage complete projects.",
        service4_title: "Cloud Migration & Optimization",
        service4_description: "We manage the migration of your systems to the cloud and optimize your existing infrastructure for efficiency.",
        service5_title: "Security Audits & Consulting",
        service5_description: "We evaluate and strengthen the security posture of your software and systems.",
        service6_title: "Continuous Maintenance & Support",
        service6_description: "We ensure the optimal functioning of your applications with proactive support and maintenance.",
        team_title: "Meet Our Team",
        team_description: "We are a diverse group of experts passionate about software development and security. Together, we turn your ideas into reality.",
        team_member1_name: "Christian Marquez",
        team_member1_role: "Software Developer & Cybersecurity Analyst",
        team_member2_name: "Alejandro Abreu",
        team_member2_role: "Front-End Developer & UI/UX Designer",
        team_member3_name: "Aurelio ML",
        team_member3_role: "Software Engineer & Artificial Intelligence",
        team_member4_name: "Anthony Peña",
        team_member4_role: "IT Helpdesk & DevOps",
        team_member5_name: "Barbara Chacin",
        team_member5_role: "3D Designer & .NET Developer",
        portfolio_title: "Our Portfolio",
        portfolio_description: "Discover some of our most outstanding projects, ranging from managed solutions to innovative developments from scratch.",
        portfolio1_title: "B2B E-commerce Platform",
        portfolio1_subtitle: "Managed Solution",
        portfolio1_description: "Ongoing optimization and maintenance of a high-traffic e-commerce platform for a global company.",
        portfolio2_title: "Personalized Health Mobile App",
        portfolio2_subtitle: "Project from Scratch",
        portfolio2_description: "Development of an innovative mobile application for health and wellness tracking, with integrated AI.",
        portfolio3_title: "Customer Relationship Management (CRM) System",
        portfolio3_subtitle: "Managed Solution",
        portfolio3_description: "Modernization and support of a legacy CRM, improving its performance and adding new functionalities.",
        portfolio4_title: "Gamified Educational Platform",
        portfolio4_subtitle: "Project from Scratch",
        portfolio4_description: "Creation of an interactive learning platform with gamification elements for university students.",
        portfolio5_title: "Microservices Integration for Fintech",
        portfolio5_subtitle: "Managed Solution",
        portfolio5_description: "Development and integration of new microservices for an existing financial application.",
        portfolio6_title: "IoT Data Analysis Tool",
        portfolio6_subtitle: "Project from Scratch",
        portfolio6_description: "Creation of an interactive dashboard to visualize and analyze real-time IoT sensor data.",
        contact_title: "Contact Us",
        contact_description: "Ready to take your project to the next level with MereyDev? Whether it's a managed solution or an innovative project from scratch, get in touch with us!",
        contact_form_success: "Thank you for your message! We will get back to you soon.",
        contact_form_close: "Close",
        footer_text: "&copy; <span id='currentYear'></span> MereyDev. All rights reserved."
    }
};

// Function to set the language
function setLanguage(lang) {
    const rootHtml = document.documentElement;
    rootHtml.lang = lang; // Update the lang attribute of the HTML tag

    // Update visible text elements
    document.querySelectorAll('[data-key]').forEach(element => {
        const key = element.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
            if (element.tagName === 'META') {
                // Handle meta tags
                if (element.getAttribute('name') === 'description' || element.getAttribute('name') === 'keywords') {
                    element.setAttribute('content', translations[lang][key]);
                } else if (element.getAttribute('property') && element.getAttribute('property').startsWith('og:') || element.getAttribute('property').startsWith('twitter:')) {
                        // Handle Open Graph and Twitter Card titles/descriptions
                        element.setAttribute('content', translations[lang][key]);
                }
            } else if (key === 'footer_text') {
                    // Special handling for footer text to preserve current year span
                element.innerHTML = translations[lang][key];
                document.getElementById('currentYear').textContent = new Date().getFullYear();
            }
            else if (key === 'page_title') {
                document.title = translations[lang][key];
            }
            else {
                element.textContent = translations[lang][key];
            }
        }
    });

    // Store selected language in localStorage
    localStorage.setItem('selectedLanguage', lang);
}

document.addEventListener('DOMContentLoaded', () => {
    // Set the current year in the footer
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    // Handle mobile menu toggle
    const mobileMenuButton = document.querySelector('.mobile-menu-btn');
    const mobileNav = document.querySelector('.mobile-nav');

    if (mobileMenuButton && mobileNav) {
        mobileMenuButton.addEventListener('click', () => {
            mobileNav.classList.toggle('hidden');
        });
    }

    // Close mobile menu when a link is clicked
    mobileNav.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            mobileNav.classList.add('hidden');
        });
    });

    // Optional: Smooth scrolling for navigation links
    document.querySelectorAll('nav a').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            if (targetId && targetId.startsWith('#')) {
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            }
        });
    });

    // Language switcher functionality
    const langEsButton = document.getElementById('lang-es');
    const langEnButton = document.getElementById('lang-en');

    if (langEsButton && langEnButton) {
        langEsButton.addEventListener('click', () => setLanguage('es'));
        langEnButton.addEventListener('click', () => setLanguage('en'));
    }

    // Load saved language preference or default to Spanish
    const savedLanguage = localStorage.getItem('selectedLanguage') || 'es';
    setLanguage(savedLanguage);

    // Basic form submission handling (for demonstration, won't send data)
    // Ensure the form actually exists before adding an event listener
    const contactForm = document.querySelector('#contacto form');
    if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            // Using a custom alert for better UI experience and to avoid browser's default alert
            const messageBox = document.createElement('div');
            messageBox.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background-color: var(--secondaryBg);
                color: var(--textColor);
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                z-index: 1000;
                text-align: center;
                max-width: 90%; /* Adjusted for better mobile fit */
                width: fit-content;
            `;
            const currentLang = document.documentElement.lang;
            const successMessage = translations[currentLang]['contact_form_success'] || translations['es']['contact_form_success'];
            const closeButtonText = translations[currentLang]['contact_form_close'] || translations['es']['contact_form_close'];

            messageBox.innerHTML = `
                <p>${successMessage}</p>
                <button onclick="this.parentNode.remove()" style="
                    background-color: var(--accentColor);
                    color: var(--primaryBg);
                    padding: 8px 16px;
                    border-radius: 4px;
                    margin-top: 15px;
                    cursor: pointer;
                    border: none;
                ">${closeButtonText}</button>
            `;
            document.body.appendChild(messageBox);
            this.reset(); // Clear the form
        });
    }
});